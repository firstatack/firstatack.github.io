<p><img src="assets/logo-dockerlabs.png" alt="logodocker" w="200" h="200" /></p>

<p>En este reto de <a href="https://dockerlabs.es" title="dockerlabs">DockerLabs</a>  encontramos con escaneo de puertos para buscar una entrada al sistema, bypass en webshell, movimiento lateral a morir y escalada final.</p>

<h2 id="herramientas-y-recursos-usados">Herramientas y recursos usados</h2>

<ul>
  <li>nmap</li>
  <li>searchbins</li>
</ul>

<h2 id="enumeracion">Enumeracion</h2>

<p>Empezamos lanzando un nmap contra el objetivo .</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-p-</span> <span class="nt">-sS</span> <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">--min-rate</span><span class="o">=</span>5000 <span class="nt">-n</span> <span class="nt">-Pn</span> <span class="nt">-oX</span> pingpong 172.17.0.2  
</code></pre></div></div>
<p><a href="/reporte/pingpong.html" title="reportesnmap">Reporte nmap</a></p>

<p>Como podemos extraer del reporte de nmap disponemos de un servicio apache tanto por el 80 como por el 443 y un servicio por el 5000.</p>

<p>Revisamos el 80 y el 443 sin exito pero en el 5000 tenemos suerte.
Es una web que nos permite realizar ping. 
Abusamos de eso y probamos.</p>

<h2 id="abuso">Abuso</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>localhost <span class="o">&amp;&amp;</span> <span class="nb">cat</span> /etc/passwd
</code></pre></div></div>

<p><img src="assets/pingpong/usuarios.png" alt="abuso" /></p>

<p>Nos ponemos a la escucha y nos mandamos una revshell.</p>

<h2 id="infiltracion-y-movimiento-lateral">Infiltracion y movimiento lateral</h2>

<p><img src="assets/pingpong/revshell.png" alt="revshell" /></p>

<p><img src="assets/pingpong/loegedfreddy.png" alt="loged" /></p>

<p>Estamos dentro con el usario freddy.</p>

<p><img src="assets/pingpong/sudofreddy.png" alt="sudofreddy" /></p>

<p>Nos movemos al usuario bobby con dpkg.</p>

<p>Usamos searchbins para ver como se usa.</p>

<p>Ahora como bobby lo mismo sudo y a ver que hay.</p>

<p><img src="assets/pingpong/sudobo.png" alt="sudobo" /></p>

<p>Ahora podemos desplazarnos con php y sudo hasta la usuaria gladys.</p>

<p><img src="assets/pingpong/searchbins.png" alt="searchbins" /></p>

<p><img src="assets/pingpong/bobbybins.png" alt="bobby" /></p>

<p>Ya somos gladys ahora sudo , find lo de siempre.
Sudo funciono.</p>

<p><img src="assets/pingpong/sudogla.png" alt="sudogla" /></p>

<p>Si os fijais en la imagen estan los paso para ser chocolatito incluida la contrase√±a que leemos del archivo en opt a traves del comando sudo.
Ahora a hacer login con chocolatito.</p>

<p>Ya somos chocolatito en una terminal con un funcionamiento fantasma , mas que nada pq no veo lo que escribo. :)</p>

<p><img src="assets/pingpong/logincho.png" alt="logcho" /></p>

<p>Volvemos a realizar los mismos pasos.
Sudo de nuevo.</p>

<p><img src="assets/pingpong/sudocho.png" alt="sudocho" /></p>

<p>Abusamos de <strong>awk</strong></p>

<p><img src="assets/pingpong/theboss.png" alt="theboss" /></p>

<p>Si pensabamos que acabamos con el boss no es asi aun que llegar a root y tenemos la escala final con el binario <strong>sed</strong></p>

<p><img src="assets/pingpong/sudoboss.png" alt="sudoboss" /></p>

<h2 id="escalada-final">Escalada final</h2>

<p>A Abusar de sed</p>

<p><img src="assets/pingpong/sed.png" alt="sed" /></p>

<p><img src="assets/pingpong/root.png" alt="root" /></p>

<p>Muchas gracias por llegar hasta aqui y leer.</p>

<p>Divertida pero estresante con tanto movimiento.</p>

