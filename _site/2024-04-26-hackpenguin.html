<p>En este reto nos encontramos con el tipico escaneo de puertos para buscar una entrada al sistema , fuzzing , steganografia</p>

<h2 id="herramientas-y-recursos-usados">Herramientas y recursos usados</h2>

<ul>
  <li>nmap</li>
  <li>gobuster</li>
  <li>stegseek</li>
</ul>

<h2 id="enumeracion">Enumeracion</h2>

<p>Empezamos lanzando un nmap contra el objetivo , el cual nos devuelve como puertos abiertos el shh y el http.</p>

<p><img src="assets/hackpenguin/nmap.png" alt="nmpa" /></p>

<p><a href="/reporte/hackpenguin_nmap.html" title="reportesnmap">Reporte nmap</a></p>

<p>Mientras revisamos la pagina por default en el 80 , lanzamos gobuster por si encuentra algo.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gobuster <span class="nt">-q</span> <span class="nb">dir</span> <span class="nt">-w</span> /usr/share/dirbuster/directory-list-2.3-medium.txt <span class="nt">-x</span> html,htm,php,txt,xml <span class="nt">-u</span> http://172.17.0.2 <span class="nt">--exclude-length</span> 3690
</code></pre></div></div>

<p><img src="assets/hackpenguin/gobuster.png" alt="gobuster" /></p>

<p>Tenemos suerte con gobuster y nos da penguin.html , revisamos la pagina y no hay nada asi que descargamos la imagen por si esconde algo.
Usamos steseek</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stegseek penguin.jpg ../rockyou.txt
</code></pre></div></div>

<p><img src="assets/hackpenguin/steggseek.png" alt="stegseek" /></p>

<p>Como vemos nos da un passphrase y otro fichero , probamos a abrir el fichero con ese passphrase con resultado negativo.</p>

<p><img src="path" alt="kbdxpass" /></p>

<p>Asi que vamos a por el intento de hashsear el fichero y tirar con john</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keepass2john penguin1.kdbx <span class="o">&gt;</span> penguin.txt
</code></pre></div></div>

<p><img src="assets/hackpenguin/keepasstojohn.png" alt="hashing" /></p>

<p>Una vez tenemos el hash se lo damos a john.
Yo lo ejecuto desde un binario compilado por mi en local.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./john penguin.txt
</code></pre></div></div>

<p><img src="assets/hackpenguin/john.png" alt="jonh" /></p>

<p>Con la pass que nos tira john abrimos el kdbx para ver que passwords guarda.</p>

<p><img src="assets/hackpenguin/kdbxpass.png" alt="kdbxpass" /></p>

<h2 id="infiltracion">Infiltracion</h2>

<p>Recordamos que tenemos chocolate password1 “que ya la usamos” y la que nos ha dado el fichero.</p>

<p>Hora de conectar o intentarlo contra ssh con los datos que tenemos.</p>

<p><img src="assets/hackpenguin/sshfallos.png" alt="ssh_fallos" /></p>

<p>No tenemos suerte en las primeras pruebas manuales , pruebo con otro user que pienso que puede ser el nombre del archivo kdbx.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh penguin@172.17.0.2
</code></pre></div></div>

<h2 id="escalada-de-privilegios">Escalada de privilegios</h2>

<p>Como de costumbre y mas rapido primero ejuctamos sudo y find como corresponde y niguno devuelve nada que sirva.
Revisamos los directorios donde tenemos acceso y encontramos un script que podria servirnos .
Tambien podriamos usar find para buscar scripts que podamos modificar.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find / <span class="nt">-user</span> root <span class="nt">-type</span> f <span class="nt">-name</span> <span class="k">*</span>.sh 2&gt;/dev/null
</code></pre></div></div>
<p>Una vez encontrado el script debemos de ver cuando se ejecuta y si se ejecuta.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ps <span class="nt">-aux</span> | <span class="nb">grep </span>root
</code></pre></div></div>

<p><img src="assets/hackpenguin/psaux.png" alt=" salidaps" /></p>

<p>Vemos que lo esta ejecutando asi que lo vamos a editar solo esta nano en la maquina.</p>

<p><img src="assets/hackpenguin/nano.png" alt="nanoedit" /></p>

<blockquote class="prompt-tip">
  <p>Yo aqui no consegui acabar como root pese a haber seguido al final los writeups</p>
</blockquote>

<p>Una vez editado esperemos a que lo ejecute y con el siguiente comando ejecutamos el binario modificado de permisos fraudulentamente.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash <span class="nt">-p</span> 
</code></pre></div></div>

<blockquote class="prompt-tip">
  <p>Jamas consegui que se ejecutara el script pienso que algo fallo ni idea , bo obstante la gente la ahce de ese modo.</p>
</blockquote>

<p>Gracias por leer.</p>

