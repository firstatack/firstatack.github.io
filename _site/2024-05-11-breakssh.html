<p><img src="assets/logo-dockerlabs.png" alt="logodocker" w="200" h="200" /></p>

<p>En este reto de <a href="https://dockerlabs.es" title="dockerlabs">DockerLabs</a>  encontramos con escaneo de puertos para buscar una entrada al sistema  , explotacion de ssh , decryt md5 y login.</p>

<h2 id="herramientas-y-recursos-usados">Herramientas y recursos usados</h2>

<ul>
  <li>Nmap</li>
  <li>hydra</li>
  <li>Python</li>
  <li>Google</li>
</ul>

<h2 id="enumeracion">Enumeracion</h2>

<p>Empezamos lanzando un nmap contra el objetivo .</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nmap <span class="nt">-p</span> 1-100 <span class="nt">--open</span> <span class="nt">-sC</span> 172.17.0.2 <span class="nt">-oX</span> breaknmap
</code></pre></div></div>
<p><a href="/reporte/breaknmap.html" title="reportesnmap">Reporte nmap</a></p>

<p>Nmap nos informa que solo tenemos el 22 abierto y con el nombre de la maquina ya tenemos claro que nos invita e explotar el servicio SSH de algun modo.
Si lanzamos un nmap -sV nos dara la version que corre que es una 7.7.</p>

<p>Ahora buscamos un script que nos permita realizar la tarea de enumeracion.</p>

<h2 id="explotacion">Explotacion</h2>

<p>En este punto directamente hubiesemos podido tirar con hydra o similar, para hacer fuerza bruta contra el user y el pass.
Yo personalmente prefiero tener alguno de esos dos datos , ademas la maquina para mi es para que aprendamos a manejar ese tipo de enumeracion.
Tambien podriais con msfconsole</p>

<p><a href="https://github.com/Sait-Nuri/CVE-2018-1547">Link to exploit</a></p>

<p>Descargenlo y sigan los pasos que indica el autor en github.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./CVE-2018-15473.py <span class="nt">-p</span> 22 <span class="nt">-w</span> ../../../../rockyou.txt  172.17.0.2
</code></pre></div></div>

<p><img src="assets/breakssh/enum.png" alt="enum" /></p>

<p>Con el usario que nos dio el exploit lanzamos hydra.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hydra <span class="nt">-l</span> lovely <span class="nt">-P</span> ../../../../rockyou.txt ssh://172.17.0.2 <span class="nt">-t</span> 4
</code></pre></div></div>

<p><img src="assets/breakssh/hydralovely.png" alt="hydralovely" /></p>

<p>Nos conectamos via ssh con el usuario lovely , buscamos como escalar y encontramos un archivo oculto en opt , no obstante una vez conseguimos el primer user volvi a lanzar hydra contra root y obtuvo su pass.</p>

<p><img src="assets/breakssh/hydraroot.png" alt="hydraroot" /></p>

<h2 id="md5-decrypt">MD5 decrypt</h2>

<p>Descifrando el hash.</p>

<p>Podemos ir a la web de crackstation hay varias de este tipo y pasarle el hash</p>

<p><img src="assets/breakssh/crackstation.png" alt="crastation" /></p>

<p>Como vemos nos da el mismo pass que hydra.</p>

<p>La cuestion es que lo queria descifrar en local y ni con john ni con openssl pude, no se si con openssl estaba haciendo una burrada pero bueno asi aprendemos, no hay perdidas de tiempo solo callejones en los que aprendemos a no  meternos .</p>

<p>Busque un script que hace el trabajo.</p>

<p><img src="assets/breakssh/decrypt.png" alt="decrypt" /></p>

<p>Ahora ya root.</p>

<p><img src="assets/breakssh/root.png" alt="root" /></p>

<p>Hasta aqui la maquinita con diversos ataques para ek mismo resultado.
Comenten si ven algo mal y avisen que es de agradecer.</p>

<p>Un saludo y muchas gracias</p>

<p>Difundan</p>

