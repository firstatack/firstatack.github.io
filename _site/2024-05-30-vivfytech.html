<p><img src="assets/card.png" alt="HackMyVm" w="200" h="200" /></p>

<h2 id="herramientas-y-recursos-usados">Herramientas y recursos usados</h2>

<ul>
  <li>Nmap</li>
  <li>feroxbuster</li>
  <li>wpscan</li>
</ul>

<h2 id="enumeracion">Enumeracion</h2>

<p>Empezamos lanzando un nmap contra el objetivo .</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-p-</span> <span class="nt">-sS</span> <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">--min-rate</span><span class="o">=</span>5000 <span class="nt">-n</span> <span class="nt">-Pn</span> <span class="nt">-oX</span> vivfytech 192.168.0.104
</code></pre></div></div>
<p><a href="/reporte/vivifytech.html" title="reportesnmap">Reporte nmap</a></p>

<p>Como nos indica el reporte de nmap disponemos de varios puntos que revisar 22 ssh , 80 http y 3306 , 33060 que paracen ambos mysql
En el 80 lo unico que encontramos es la plantilla por defecto de apache pero como tambien parece estar mysql deberia de haber algo mas.</p>

<p>Fuzzeamos un poco tanto con gobuster como con feroxbuster.
Con cada uno encuentro cosas interesantes.
Feroxbuster me indica que tenemos uploads , wp-includes listable desde la web.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>feroxbuster <span class="nt">-w</span> /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt <span class="nt">-t</span> 400 <span class="nt">-e</span> <span class="nt">-x</span> php,txt,html,jpg,js <span class="nt">-u</span> http://192.168.0.104
</code></pre></div></div>

<p><img src="assets/vivifytech/gobuster.png" alt="gobuster" /></p>

<p>Gobuster me dice que dentro de wp-includes hay un fichero llamado secrets.txt , lo descargamos y revisamos su contenido , no se si son usuarios o posibles passwords.
<strong>RARO ES QUE SE PUEDA LISTAR INCLUDES</strong></p>

<p><img src="assets/vivifytech/secretxpass.png" alt="secretsxpas" /></p>

<p>Revisando la web vemos que hay un editor que se llama <strong>sancelisso</strong> lo cual podria ser un posible usuario revisamos tambien sus posts por si hay alguna pista extra si no tiraremos de hydra con sancelisso y la lista secrets.txt.
Asi que me abro un txt en la maquina atacante y anoto sancelisso.
Uno de los posts de este usuario nos cuenta que hay detras de la empresa vivfytech y lo que cuenta promete pues hay un ,ogollon de nombres de usuario lo cual me indica que secrets.txt son passwords.</p>

<p><strong>Anotamos todos los nombres sin dejarnos ninguno</strong></p>

<p><img src="assets/vivifytech/users.png" alt="users" /></p>

<p>En este punto podemos lanzar hydra contra ssh o probar a explotar wordpress.
Yo pruebo primero con wpscan dado que es mas rapido que un ataque al protocolo ssh.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wpscan <span class="nt">--url</span> http://192.168.0.104/wordpress/ <span class="nt">-U</span> users.txt <span class="nt">-P</span> secrets.txt
</code></pre></div></div>

<blockquote>
  <p>No hubo suerte asi que no queda otra que tratar con hydra.Debe ser una madriguera de conejo.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hydra <span class="nt">-L</span> /home/quino/Maquinas_hack/hackmyvm/vivifytech/skills/user.txt <span class="nt">-P</span> /home/quino/Maquinas_hack/hackmyvm/vivifytech/skills/secrets.txt ssh://192.168.0.104 <span class="nt">-t</span> 4
</code></pre></div></div>

<p>Tenemos suerte y nos encuentra un pass rapidisimo asi que hacemos login con las credenciales proporcionadas por hydra.</p>

<p><img src="assets/vivifytech/hydrasarah.png" alt="sarah" /></p>

<h2 id="infiltracion">Infiltracion</h2>

<p>Nos conectamos via ssh y listamos para obtener la primera flag si os interesa.</p>

<p><img src="assets/vivifytech/flagsarah.png" alt="loginflag" /></p>

<p>Vemos que existe un directorio llamado private con un fichero el cual contiene las tareas que debe realizar en la empresa y tambien un usario y pass</p>

<p><img src="assets/vivifytech/task.png" alt="tasks" /></p>

<p>Probamos el login con esos credenciales.
Conseguimos entrar , ahora debemos buscar como escalar privilegios quien me sigue sabe que siempre ejecuto primero <strong>sudo -l</strong> y en esta ocasion estamos de suerte nos han proporcionado el binario git con permisos de superusuario.</p>

<p><img src="assets/vivifytech/sudol.png" alt="sudol" /></p>

<h2 id="escalada-final">Escalada final</h2>

<p><img src="assets/vivifytech/rootescalada.png" alt="root" /></p>

<p>Maquina lista.Muy divertida y jodida porque en varias ocasiones te hace pensar que la resolucion va por otro lugarâ€¦.</p>

<p>Gracias por leer</p>

<p>Gracias por leer.</p>

