<p><img src="assets/bash.png" alt="logobash" /></p>

<h2 id="video-to-m3u">VIDEO TO M3U</h2>

<blockquote class="prompt-info">
  <p>Aporte antiguo pero aun vigente en muchas maquinas seguimos listando.</p>
</blockquote>

<p>En el siguiente script nos aprovechamos de que apache nos deje listar los directorios donde han subido peliculas o series.</p>

<p>Para buscar lo que nos interesa podemos hacer uso de google-dorks os dejo un ejemplo sencillo.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>inurl: <span class="s2">"index of /cine"</span>
</code></pre></div></div>

<p>Podeis complicarlo como querais ese dork a mi ese ya me aporta resultados.
Tampoco abuseis de los dokrs pues son empleados en tecnicas para buscar fallos de seguridad y vulnerabilidades entre otras cosas y por lo tanto google esta al acecho</p>

<p><img src="assets/warninggoogle.png" alt="warning" /></p>

<p><a href="https://github.com/firstatack/video2m3u" title="Repositorio script">repo</a></p>

<h3 id="humilde-script">Humilde script</h3>

<p>Es sencillo pero funcional , el modo de uso es simple solo debemos editar <strong>la vriable url</strong> introduciendo la direccion desde donde haremos el scraping web , la direcion la buscais haciendo uso de los dorks.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="c"># URL de la página web</span>
<span class="c">#url="https://tvinnov.online/Peliculas/"</span>
<span class="nv">url</span><span class="o">=</span><span class="s1">'http://pilarika.no-ip.org/Cine/Cine_01/'</span>

<span class="c"># Nombre del archivo de salida</span>
<span class="nv">output_file</span><span class="o">=</span><span class="s2">"videos.m3u"</span>

<span class="c"># Obtener el contenido de la página web</span>
<span class="nv">content</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="s2">"</span><span class="nv">$url</span><span class="s2">"</span><span class="si">)</span>

<span class="c"># Extraer los enlaces de video utilizando expresiones regulares</span>
<span class="nv">video_links</span><span class="o">=</span><span class="si">$(</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$content</span><span class="s2">"</span> | <span class="nb">grep</span> <span class="nt">-Eo</span> <span class="s1">'href="([^"#]+\.mp4)"'</span> | <span class="nb">cut</span> <span class="nt">-d</span><span class="s1">'"'</span> <span class="nt">-f2</span><span class="si">)</span>

<span class="c"># Crear el archivo de salida y escribir los enlaces de video</span>
<span class="nb">echo</span> <span class="s2">"#EXTM3U"</span> <span class="o">&gt;</span> <span class="s2">"</span><span class="nv">$output_file</span><span class="s2">"</span>
<span class="k">for </span><span class="nb">link </span><span class="k">in</span> <span class="nv">$video_links</span><span class="p">;</span> <span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"#EXTINF:0,</span><span class="nv">$link</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$output_file</span><span class="s2">"</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$url$link</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$output_file</span><span class="s2">"</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"Se han extraído los enlaces de video y se han guardado en el archivo </span><span class="nv">$output_file</span><span class="s2">."</span>
</code></pre></div></div>

<p>Gracias y compartan</p>
